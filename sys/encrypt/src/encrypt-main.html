<!DOCTYPE html>
<html>
<head>
    <script>window.$ = window.jQuery = require('jquery');</script>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta http-equiv="Content-Security-Policy" content="default-src file: 'unsafe-inline'">

    <link href="../contrib/css/jquery-ui.css" rel="stylesheet">
    <link href="../contrib/css/bootstrap.min.css" rel="stylesheet">
    <link href="encrypt-main.css" rel="stylesheet">
    <link href="output.css" rel="stylesheet">
    <title>USB Copy Pro Encryption Utility</title>
</head>
<body>

    <!-- <h1>USB Copy Pro Encryption Utility</h1> -->
    <!-- <div class="modal" tabindex="-1" role="dialog" id="aboutbox"> -->
    <div class="fixed inset-0 z-50 overflow-y-auto modal" aria-labelledby="modal-title" role="dialog" aria-modal="true" id="aboutbox">
        <div class="flex min-h-screen items-end justify-center px-4 pt-4 pb-20 text-center sm:block sm:p-0">
            <!-- <div 
            class="fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity" 
            aria-hidden="true"
            ></div> -->
    
            <div class="inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full relative">
            <div class="absolute top-0 right-0 pt-4 pr-4">
                <button
                data-dismiss="modal"
                class="bg-white rounded-md text-gray-400 hover:text-gray-500 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2"
                >
                <!-- <X class="h-6 w-6" /> -->
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="h-6 w-6 lucide lucide-x"><path d="M18 6 6 18"/><path d="m6 6 12 12"/></svg>
                </button>
            </div>
    
            <div class="bg-gradient-to-r from-indigo-600 to-blue-600 px-4 py-6 sm:px-6">
                <div class="flex items-center justify-center">
                <div class="bg-white/10 p-3 rounded-full">
                    <!-- <Info class="h-8 w-8 text-white" /> -->
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="h-8 w-8 lucide lucide-info"><circle cx="12" cy="12" r="10"/><path d="M12 16v-4"/><path d="M12 8h.01"/></svg>

                </div>
                </div>
                <h3 class="mt-4 text-center text-2xl font-bold text-white" id="modal-title">
                USB Copy Pro
                </h3>
                <p class="mt-1 text-center text-sm text-white/80">
                Professional USB Management Solution
                </p>
            </div>
    
            <div class="bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4">
                <div class="space-y-4">
                <div class="flex items-center p-3 bg-gray-50 rounded-lg transition-all hover:bg-gray-100">
                    <!-- <Layers class="h-5 w-5 text-indigo-600 mr-3" /> -->
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="h-5 w-5 text-indigo-600 mr-3 lucide lucide-layers"><path d="m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z"/><path d="m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65"/><path d="m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65"/></svg>
                    <div>
                    <p class="text-sm font-medium text-gray-900">Version: <code id="version-info"></code></p>
                    <!-- <p class="text-sm text-gray-500">{version}</p> -->
                    </div>
                </div>
    
                <div class="flex items-center p-3 bg-gray-50 rounded-lg transition-all hover:bg-gray-100">
                    <!-- <Cpu class="h-5 w-5 text-indigo-600 mr-3" /> -->
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="h-5 w-5 text-indigo-600 mr-3 lucide lucide-cpu"><rect width="16" height="16" x="4" y="4" rx="2"/><rect width="6" height="6" x="9" y="9" rx="1"/><path d="M15 2v2"/><path d="M15 20v2"/><path d="M2 15h2"/><path d="M2 9h2"/><path d="M20 15h2"/><path d="M20 9h2"/><path d="M9 2v2"/><path d="M9 20v2"/></svg>
                    <div>
                    <p class="text-sm font-medium text-gray-900">System: <code id="system-info"></code></p>
                    <!-- <p class="text-sm text-gray-500">{system}</p> -->
                    </div>
                </div>
    
                <div class="flex items-center p-3 bg-gray-50 rounded-lg transition-all hover:bg-gray-100">
                    <!-- <Github class="h-5 w-5 text-indigo-600 mr-3" /> -->
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="h-5 w-5 text-indigo-600 mr-3 lucide lucide-github"><path d="M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4"/><path d="M9 18c-4.51 2-5-2-7-2"/></svg>
                    <div>
                    <p class="text-sm font-medium text-gray-900">Electron: <code id="electron-info"></code></p>
                    <!-- <p class="text-sm text-gray-500">{electron}</p> -->
                    </div>
                </div>
                </div>
            </div>
    
            <div class="bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse">
                <button
                type="button"
                data-dismiss="modal"
                class="w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-indigo-600 text-base font-medium text-white hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:ml-3 sm:w-auto sm:text-sm transition-colors"
                >
                Close
                </button>
            </div>
            </div>
        </div>
    </div>
    <!-- </div> -->
    <div class="min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 p-6">
        <div class="max-w-4xl mx-auto bg-white rounded-xl shadow-lg overflow-hidden">
            <div class="bg-indigo-600 p-6 text-white">
                <div class="flex items-center justify-between">
                    <div class="flex items-center gap-3">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-8 h-8 lucide lucide-lock"><rect width="18" height="11" x="3" y="11" rx="2" ry="2"/><path d="M7 11V7a5 5 0 0 1 10 0v4"/></svg>
                        <h1 class="text-2xl font-bold">USB Copy Pro Encryption Utility</h1>
                    </div>
                    <div class="flex justify-self-end">
                        <button
                            class=" p-2 hover:bg-white/10 rounded-full transition-colors"
                            title="About"
                        >
                            <Info class="w-6 h-6" />
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-6 h-6 lucide lucide-info"><circle cx="12" cy="12" r="10"/><path d="M12 16v-4"/><path d="M12 8h.01"/></svg>
                        </button>
                    </div>
                </div>
            </div>
        <!-- <div style="padding:5px">
            <select id="presets-select">
            </select>
            <input class="input-left" style="width:10em" type="text" name="save-as" />
            <button style="padding:4px" class="btn btn-primary button btnenabled" id="btn-save-config">Save</button>
        </div> -->
            <div class="grid grid-cols-2 gap-6 p-6">
            <!-- {/* Device Information */} -->
            <div class="col-span-2 bg-gray-50 p-4 rounded-lg">
                <h2 class="text-lg font-semibold mb-4 flex items-center gap-2">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-5 h-5 text-indigo-600 lucide lucide-hard-drive"><line x1="22" x2="2" y1="12" y2="12"/><path d="M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z"/><line x1="6" x2="6.01" y1="16" y2="16"/><line x1="10" x2="10.01" y1="16" y2="16"/></svg>
                Device Configuration
                </h2>
                <div class="grid grid-cols-2 gap-4">
                <div>
                    <label class="block text-sm font-medium text-gray-700">VID</label>
                    <input
                    type="text"
                    name="vid"
                    class="mt-1 px-2 h-8 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"
                    />
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700">PID</label>
                    <input
                    type="text"
                    name="pid"
                    class="mt-1 px-2 h-8 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"
                    />
                </div>
                </div>
                <div class="mt-4">
                <label class="block text-sm font-medium text-gray-700">
                    Serial Number
                    <span class="text-xs text-gray-500 ml-2">(leading significant characters only)</span>
                </label>
                <input
                    type="text"
                    name="serial"
                    class="mt-1 px-2 h-8 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"
                />
                </div>
            </div>

            <!-- {/* Folder Configuration */} -->
            <div class="col-span-2 space-y-4">
                <div>
                <label class="block text-sm font-medium text-gray-700">Common Folder</label>
                <div class="mt-1 flex rounded-md shadow-sm">
                    <input
                    type="text"
                    name="indir"
                    class="px-2 flex-1 rounded-l-md border-gray-300 focus:border-indigo-500 focus:ring-indigo-500"
                    />
                    <button
                    type="button"
                    id="btn-select-indir"
                    class="inline-flex items-center px-4 py-2 border border-l-0 border-gray-300 rounded-r-md bg-gray-50 text-gray-700 hover:bg-gray-100"
                    >
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-4 h-4 lucide lucide-folder-open"><path d="m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2"/></svg>
                    </button>
                </div>
                </div>

                <div>
                <label class="block text-sm font-medium text-gray-700">Included Files Folder</label>
                <div class="mt-1 flex rounded-md shadow-sm">
                    <input
                    type="text"
                    name="includedir"
                    class="px-2 flex-1 rounded-l-md border-gray-300 focus:border-indigo-500 focus:ring-indigo-500"
                    />
                    <button
                    type="button"
                    id="btn-select-includedir"
                    class="inline-flex items-center px-4 py-2 border border-l-0 border-gray-300 rounded-r-md bg-gray-50 text-gray-700 hover:bg-gray-100"
                    >
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-4 h-4 lucide lucide-folder-open"><path d="m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2"/></svg>
                    </button>
                </div>
                </div>

                <div>
                <label class="block text-sm font-medium text-gray-700">Final Output Folder</label>
                <div class="mt-1 flex rounded-md shadow-sm">
                    <input
                    type="text"
                    name="outdir"
                    class="px-2 flex-1 rounded-l-md border-gray-300 focus:border-indigo-500 focus:ring-indigo-500"
                    />
                    <button
                    type="button"
                    id="btn-select-outdir"
                    class="inline-flex items-center px-4 py-2 border border-l-0 border-gray-300 rounded-r-md bg-gray-50 text-gray-700 hover:bg-gray-100"
                    >
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-4 h-4 lucide lucide-folder-open"><path d="m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2"/></svg>
                    </button>
                </div>
                </div>
            </div>

            <!-- {/* Additional Settings */} -->
            <div class="col-span-2 space-y-4">
                <div>
                <label class="block text-sm font-medium text-gray-700">Exclude from encryption</label>
                <div class="mt-1 flex rounded-md shadow-sm">
                    <input
                    type="text"
                    name='newmask'
                    class="px-2 h-8 flex-1 rounded-md border-gray-300 focus:border-indigo-500 focus:ring-indigo-500"
                    />
                    <!-- <span class='plusbtn' onclick='ctl.addNewMask()'>&oplus;</span>
                    <div class="tooltip">?
                        <span class="tooltiptext">Use filemasks like *.js</span>
                    </div> -->
                </div>
                </div>

                <div class="flex items-center">
                <input
                    type="checkbox"
                    class="h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"
                    id='fileBrowserEnabled'
                    name='fileBrowserEnabled'
                />
                <label class="ml-2 mt-2 block text-sm text-gray-700">
                    Enable file browser (<span style="font-weight: bold;" id="displayFileBrowserEnabled">&nbsp;</span>)
                </label>
                </div>
            </div>
            </div>

                <!-- {/* Action Buttons */} -->
            <div class="flex justify-end space-x-4 p-6 ml-4 mr-4 border-t">
                <!-- <button
                type="button"
                class="px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"
                >
                Cancel
                </button> -->
                <button
                type="submit"
                class="inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"
                id="btn-encrypt"
                >Encrypt
                <!-- status === 'running' ? 'opacity-75 cursor-not-allowed' : '' -->
                <!-- {status === 'idle' && <Play class="w-4 h-4 mr-2" />} -->
                <!-- {status === 'running' && (
                    <svg class="animate-spin h-4 w-4 mr-2" viewBox="0 0 24 24">
                    <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" strokeWidth="4" fill="none" />
                    <path
                        class="opacity-75"
                        fill="currentColor"
                        d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"
                    />
                    </svg>
                )}
                {status === 'completed' && <Check class="w-4 h-4 mr-2" />}
                {status === 'idle' && 'Start Encryption'}
                {status === 'running' && 'Processing...'}
                {status === 'completed' && 'Completed'} -->
                </button>
                <button class="inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500" id="btn-launch">Launch</button>
                <button class="inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500" id="btn-finalize">Finalize</button>
            </div>

        <!-- {/* Status Bar */} -->
        <!-- {status !== 'idle' && (
            <div class={`p-4 ${status === 'completed' ? 'bg-green-50' : 'bg-blue-50'}`}>
            <div class="flex items-center">
                {status === 'running' && (
                <div class="flex-shrink-0">
                    <div class="h-2 w-2 bg-blue-600 rounded-full animate-pulse"></div>
                </div>
                )}
                {status === 'completed' && (
                <div class="flex-shrink-0">
                    <div class="h-2 w-2 bg-green-600 rounded-full"></div>
                </div>
                )}
                <div class="ml-3">
                <p class={`text-sm font-medium ${status === 'completed' ? 'text-green-800' : 'text-blue-800'}`}>
                    {status === 'running' && 'Processing encryption...'}
                    {status === 'completed' && 'Encryption completed successfully'}
                </p>
                </div>
            </div>
            </div>
        )} -->

        </div>
        <div class="max-w-4xl mx-auto">
            <div class="spacer">&nbsp;</div>

            <div class="border rounded-lg overflow-hidden transition-all duration-300 bg-green-50 border-green-200">
                <div class="flex items-center justify-between px-2 py-2 border-b border-opacity-20">
                    <div class="flex items-center space-x-2">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="h-5 w-5 text-green-600 lucide lucide-circle-check"><circle cx="12" cy="12" r="10"/><path d="m9 12 2 2 4-4"/></svg>
                        <span class="font-medium text-sm" id="status"></span>
                    </div>
                    <button class="text-gray-500 hover:text-gray-700 focus:outline-none">
                    <!-- <Terminal class="h-4 w-4" /> -->
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-terminal"><polyline points="4 17 10 11 4 5"/><line x1="12" x2="20" y1="19" y2="19"/></svg>
                    </button>
                </div>
                <div class="max-h-64 overflow-y-auto font-mono text-sm p-4 space-y-1 bg-white bg-opacity-50">

                    <div class="text-red-600 flex items-start space-x-2">
                        <!-- <AlertCircle class="h-4 w-4 mt-0.5 flex-shrink-0" /> -->
                        <!-- <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="h-4 w-4 mt-0.5 flex-shrink-0 lucide lucide-circle-alert"><circle cx="12" cy="12" r="10"/><line x1="12" x2="12" y1="8" y2="12"/><line x1="12" x2="12.01" y1="16" y2="16"/></svg> -->
                        <span id="errors"></span>
                    </div>

                    <div class="text-gray-700 flex items-start space-x-2">
                        <span id="messages"></span>
                    </div>

                </div>                
            </div>
            <!-- <div style="display:none" class="alert alert-danger" id="errors"></div>
            <div style="display:none" class="alert alert-info" id="messages"></div>
            <div style="display:none; width:100%; height:1em" id="progress"></div> -->
        </div>
    </div>

    <script>
    var ctl = require('./encrypt-render.js');
    </script>
    <script src="../contrib/js/bootstrap.min.js"></script>

</body>
</html>
